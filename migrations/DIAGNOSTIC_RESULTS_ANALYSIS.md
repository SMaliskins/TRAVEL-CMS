# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–î–∞—Ç–∞:** 2025-12-25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### RECORD 1 (Gulliver Travel)
- **Record ID:** `4642eea4-38ed-464d-866c-3d2bea38235e`
- **–°—Ç–∞—Ç—É—Å:** ‚ùå **NOT FOUND**
- **Count:** `0`
- **–í—ã–≤–æ–¥:** –ó–∞–ø–∏—Å—å **–ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### RECORD 2
- **Record ID:** `5bbdd5f0-2d4f-4e7b-86d1-13940e95fde6`
- **–°—Ç–∞—Ç—É—Å:** ‚ùå **NOT FOUND**
- **Count:** `0`
- **–í—ã–≤–æ–¥:** –ó–∞–ø–∏—Å—å **–ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### USERS (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- **–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** `1`
- **–ë–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏:** `0` ‚úÖ
- **–í Default Company:** `1` ‚úÖ
- **–í—ã–≤–æ–¥:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–ø–∞–Ω–∏–∏

### COMPANIES (–ö–æ–º–ø–∞–Ω–∏–∏)
- **–í—Å–µ–≥–æ –∫–æ–º–ø–∞–Ω–∏–π:** `1`
- **ID:** `ca0143be-0696-4422-b949-4f4119adef36`
- **Name:** `Default Company`
- **–í—ã–≤–æ–¥:** –ö–æ–º–ø–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

## üéØ –í—ã–≤–æ–¥

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ó–∞–ø–∏—Å–∏ **–ù–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–≠—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå Tenant isolation (–∑–∞–ø–∏—Å–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –ø–æ—ç—Ç–æ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏ —á–µ–º)
- ‚ùå Field mapping (–∑–∞–ø–∏—Å–∏ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –º–∞–ø–ø–∏–Ω–≥ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è)
- ‚ùå API endpoint (–∑–∞–ø–∏—Å–∏ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É API –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404)

**–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚úÖ **–ó–∞–ø–∏—Å–∏ –Ω–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã** –∏–ª–∏ **–±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã**
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –≤–∏–¥–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üîç –ü–æ—á–µ–º—É –∑–∞–ø–∏—Å–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç?

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ (–Ω–µ –ø–æ–∫–∞–∑–∞–ª–∞—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)**
   - API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É, –Ω–æ –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–µ–ª –æ—à–∏–±–∫—É
   - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

2. **–ó–∞–ø–∏—Å–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã**
   - –£–¥–∞–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL
   - –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –æ—á–∏—â–µ–Ω—ã

3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Å–æ–∑–¥–∞–Ω–∏—è**
   - –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ API
   - –û—à–∏–±–∫–∞ –≤ API endpoint `/api/directory/create`
   - –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è Company
3. –ù–∞–∂–º–∏—Ç–µ "Save"
4. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network tab**
5. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/directory/create`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)
   - –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–µ—Å—Ç—å –ª–∏ `error`?)
   - Request payload (–≤—Å–µ –ª–∏ –ø–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã?)

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`:**
- –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∏–ø–∞ `Error creating company:` –∏–ª–∏ `Failed to create party`

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏

**–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å "Gulliver Travel" —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è

### SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:

```sql
-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö party –∑–∞–ø–∏—Å–µ–π
SELECT 
    id,
    display_name,
    party_type,
    status,
    company_id,
    created_at,
    created_by
FROM public.party
ORDER BY created_at DESC
LIMIT 10;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞, –±—ã–ª–∏ –ª–∏ –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ —É–¥–∞–ª–µ–Ω—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
-- –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π
SELECT * FROM audit_log 
WHERE table_name = 'party' 
  AND action = 'DELETE'
  AND record_id IN (
    '4642eea4-38ed-464d-866c-3d2bea38235e',
    '5bbdd5f0-2d4f-4e7b-86d1-13940e95fde6'
  );
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è
   - –°–æ–∑–¥–∞–π—Ç–µ Company –∑–∞–ø–∏—Å—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

2. **–ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

3. **–ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö
   - –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
   - –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

- ‚úÖ Tenant isolation –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–º–ø–∞–Ω–∏–∏)
- ‚úÖ –ö–æ–º–ø–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç `company_id`
- ‚úÖ API endpoint –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

---

## üéØ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø–∏—Å–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
2. –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ –∑–∞–Ω–æ–≤–æ
3. –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é Company –∑–∞–ø–∏—Å—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

