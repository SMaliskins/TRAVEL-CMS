# Как просматривать результаты диагностики в Supabase SQL Editor

## Проблема
В Supabase SQL Editor, когда вы запускаете скрипт с несколькими SELECT запросами, может выполниться только **последний запрос**, или результаты могут отображаться неправильно.

## Решение 1: Использовать упрощенный скрипт (рекомендуется)

**Файл:** `migrations/DIAGNOSTIC_SIMPLE.sql`

Этот скрипт показывает **все результаты в одной таблице**:
- Статус обеих записей (EXISTS/NOT FOUND)
- Company_id записей
- Количество пользователей
- Информацию о компаниях

**Как использовать:**
1. Откройте `migrations/DIAGNOSTIC_SIMPLE.sql`
2. Скопируйте **первый запрос** (до комментария "ДОПОЛНИТЕЛЬНАЯ ПРОВЕРКА")
3. Вставьте в SQL Editor
4. Нажмите Run
5. Вы увидите **одну таблицу** с результатами всех проверок

## Решение 2: Запускать запросы по отдельности

Если хотите использовать полный скрипт `DIAGNOSTIC_BOTH_RECORDS.sql`:

### Вариант A: Разделить точкой с запятой
Каждый SELECT должен заканчиваться точкой с запятой `;`, и между ними не должно быть пустых строк.

### Вариант B: Запускать секции по отдельности
Копируйте и запускайте по одной секции:

**1. Проверка записи 1:**
```sql
-- Скопируйте строки 7-15 из DIAGNOSTIC_BOTH_RECORDS.sql
SELECT 
    'RECORD 1 - EXISTS CHECK' as test,
    ...
```

**2. Данные записи 1:**
```sql
-- Скопируйте строки 20-32
SELECT 
    'RECORD 1 - PARTY DATA' as test,
    ...
```

И так далее.

## Решение 3: Использовать вкладки Results

В Supabase SQL Editor есть вкладки:
- **Results** - показывает таблицу с результатами
- **Chart** - графическое представление (если применимо)
- **Export** - экспорт данных

Если выполнилось несколько запросов:
1. Проверьте вкладку **Results**
2. Могут быть несколько вкладок результатов - переключайтесь между ними
3. Или прокрутите вниз в одном окне результатов

## Что делать сейчас

**Самый простой способ:**
1. Откройте `migrations/DIAGNOSTIC_SIMPLE.sql`
2. Скопируйте **первый большой запрос** (весь блок с WITH)
3. Вставьте в SQL Editor
4. Нажмите Run
5. Вы увидите одну таблицу с результатами:
   - RECORD 1 - статус и данные
   - RECORD 2 - статус и данные  
   - USERS - количество пользователей
   - COMPANIES - список компаний

**Затем запустите второй запрос** (TENANT ISOLATION CHECK) отдельно, чтобы увидеть детальное сравнение company_id.

