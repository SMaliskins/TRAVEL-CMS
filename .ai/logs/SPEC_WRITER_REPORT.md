# SPEC WRITER REPORT

---

## [2026-01-05] Spec: Create Client Mini-Form from New Order

### Контекст
При создании заказа, если клиента нет в базе, пользователь нажимает "+ Create". Вместо мгновенного создания должна открыться мини-форма.

### Требования

**Мини-форма для физического лица (Person):**
| Поле | Обязательное |
|------|--------------|
| First Name | ✅ * |
| Last Name | ✅ * |
| Personal Code | ❌ |
| Phone | ❌ |
| Email | ❌ |

**Мини-форма для юридического лица (Company):**
| Поле | Обязательное |
|------|--------------|
| Company Name | ✅ * |
| Address | ❌ |
| Reg Number | ❌ |

### UX Flow

1. Пользователь вводит текст в поле Client (например "Rad")
2. Поиск не находит → показывается "+ Create 'Rad'"
3. Клик на "+ Create" → открывается модальное окно / inline форма
4. Введённый текст переносится в поле First Name (или Company Name)
5. Пользователь выбирает тип (Person/Company)
6. Заполняет обязательные поля
7. Нажимает "Save" → клиент создаётся в БД
8. Клиент автоматически выбирается в поле Client заказа
9. Форма закрывается

### Компонент

Новый компонент: `CreateClientModal` или inline в `PartySelect`

---

## Задачи для CODE WRITER

### Задача 1: Исправить отображение клиента в списке заказов
- Файл: `app/orders/page.tsx` или `app/api/orders/route.ts`
- Проблема: client показывает "Unknown Client" или "—"
- Причина: колонка `client_display_name` пустая или не существует

### Задача 2: Исправить отображение клиента на странице заказа
- Файл: `app/orders/[orderCode]/page.tsx`
- Проблема: показывает "Coming next" вместо имени клиента

### Задача 3: Мини-форма создания клиента
- Файл: `components/PartySelect.tsx`
- Добавить модальное окно с формой
- Перенос введённого текста в форму
- Переключатель Person/Company
- Валидация обязательных полей
- Сохранение через API

---
