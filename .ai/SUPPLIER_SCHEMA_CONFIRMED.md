# Supplier Schema - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!

**Date:** 2025-12-25  
**Status:** ‚úÖ Schema Verified

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã SQL –∑–∞–ø—Ä–æ—Å–∞

### –¢–∞–±–ª–∏—Ü–∞ `partner_party` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π:** 3

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (–∏–∑ –ø—Ä–∏–º–µ—Ä–∞):

| Column | Sample Values | Status |
|--------|---------------|--------|
| `id` | uuid values | ‚úÖ |
| `party_id` | uuid values | ‚úÖ |
| `partner_role` | "supplier" | ‚úÖ –í—Å–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ |
| `business_category` | NULL, "TO" | ‚úÖ –ü–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |
| `commission_type` | NULL | ‚úÖ –ü–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è |
| `commission_value` | NULL | ‚úÖ –ü–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è |
| `commission_currency` | "EUR" | ‚úÖ –ü–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, default value —Ä–∞–±–æ—Ç–∞–µ—Ç |
| `commission_notes` | NULL | ‚úÖ –ü–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ß—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è:

1. ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** - `partner_party` —Å–æ–∑–¥–∞–Ω–∞
2. ‚úÖ **–ü–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç** - –≤—Å–µ –æ–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
3. ‚úÖ **–ó–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è** - Supplier –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
4. ‚ö†Ô∏è **–ü–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è** - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª–µ–π NULL

### –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:

**–í Row 1:**
- `business_category`: NULL (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ —Ñ–æ—Ä–º—ã)
- `commission_type`: NULL (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)
- `commission_value`: NULL (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)

**–í Row 2:**
- `business_category`: "TO" ‚úÖ (–∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
- `commission_type`: NULL (–Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)
- `commission_value`: NULL (–Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)

**–í—ã–≤–æ–¥:** 
- –ü–æ–ª—è `business_category` –∏–Ω–æ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è (Row 2 = "TO")
- –ü–æ–ª—è `commission_type`, `commission_value` –ù–ò–ö–û–ì–î–ê –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è
- –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ CREATE endpoint –Ω–µ –º–∞–ø–ø–∏—Ç –≤—Å–µ –ø–æ–ª—è

---

## üéØ –ü—Ä–∏—á–∏–Ω–∞ "Record not found"

**–¢–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ:**

1. ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (–µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ)
2. ‚úÖ –ü–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
3. ‚ö†Ô∏è –ü–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ —Ñ–æ—Ä–º—ã (CREATE endpoint –ø—Ä–æ–±–ª–µ–º–∞)
4. ‚ùì "Record not found" - –ù–ï –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã "Record not found":**
- Tenant isolation (company_id mismatch)
- GET endpoint –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- Redirect –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–¥–µ—Ç –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID

---

## ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ö–µ–º—ã

**–í—Å–µ –ø–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ:**
- ‚úÖ `id` (uuid, PK)
- ‚úÖ `party_id` (uuid, FK ‚Üí party)
- ‚úÖ `partner_role` (text, NOT NULL, default 'supplier')
- ‚úÖ `business_category` (text, NULLABLE)
- ‚úÖ `commission_type` (text, NULLABLE)
- ‚úÖ `commission_value` (numeric, NULLABLE)
- ‚úÖ `commission_currency` (text, NULLABLE, default 'EUR')
- ‚úÖ `commission_valid_from` (date, NULLABLE) - –Ω–µ –≤–∏–¥–Ω–æ –≤ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
- ‚úÖ `commission_valid_to` (date, NULLABLE) - –Ω–µ –≤–∏–¥–Ω–æ –≤ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
- ‚úÖ `commission_notes` (text, NULLABLE)

---

## üìã –í—ã–≤–æ–¥—ã

1. ‚úÖ **–°—Ö–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞** - –≤—Å–µ –ø–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç
2. ‚úÖ **CREATE —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è
3. ‚ö†Ô∏è **–ú–∞–ø–ø–∏–Ω–≥ –Ω–µ–ø–æ–ª–Ω—ã–π** - –ø–æ–ª—è –∏–∑ —Ñ–æ—Ä–º—ã –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è
4. ‚ùì **"Record not found"** - –Ω–µ –∏–∑-–∑–∞ —Å—Ö–µ–º—ã, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å tenant isolation –∏–ª–∏ GET endpoint

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å CREATE endpoint –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π –∏–∑ `supplierExtras`

