# Directory Edit Mode - Roles Selection Not Visible
**Priority:** CRITICAL  
**Type:** Bug Fix  
**Assigned to:** CODE WRITER  
**Status:** TODO

---

## üîç –ü–†–û–ë–õ–ï–ú–ê

### –°–∏–º–ø—Ç–æ–º—ã:
- –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ Directory —Å —Ä–æ–ª—è–º–∏ Supplier/Subagent (–±–µ–∑ —Ä–æ–ª–∏ Client) —Å–µ–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–µ–π –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–ø–∏—Å–µ–π Supplier/Subagent
- –°–µ–∫—Ü–∏—è "Type and Roles" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–µ-Client –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–º–µ—Ä:** –ó–∞–ø–∏—Å—å —Å ID `11293ddb-6ac7-465b-bc18-ded62ce784f4` –∏–º–µ–µ—Ç —Ä–æ–ª—å Supplier, –Ω–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –Ω–µ –≤–∏–¥–Ω–∞.

---

## üîç –ü–†–ò–ß–ò–ù–ê

**–§–∞–π–ª:** `components/DirectoryForm.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 401:**

```typescript
{(mode === "create" && !isClient) || isClient ? (
  <div className="flex items-start gap-12">
    {/* Type selection */}
    {/* Roles selection */}
  </div>
) : null}
```

**–ê–Ω–∞–ª–∏–∑ —É—Å–ª–æ–≤–∏—è:**
- –£—Å–ª–æ–≤–∏–µ: `(mode === "create" && !isClient) || isClient`
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: —Å–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
  1. `(mode === "create" && !isClient)` - —Ä–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è –ò –Ω–µ—Ç —Ä–æ–ª–∏ client
  2. **–ò–õ–ò** `isClient` - –µ—Å—Ç—å —Ä–æ–ª—å client

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í —Ä–µ–∂–∏–º–µ `edit`, –µ—Å–ª–∏ `isClient === false` (–∑–∞–ø–∏—Å—å –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ supplier/subagent), —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –°–µ–∫—Ü–∏—è Type –∏ Roles –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª–∏

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í —Ä–µ–∂–∏–º–µ `edit` —Å–µ–∫—Ü–∏—è Type –∏ Roles –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—Å–µ–≥–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–æ–ª–µ–π
- –í —Ä–µ–∂–∏–º–µ `create` –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ (–Ω–æ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞)

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –§–∞–π–ª: `components/DirectoryForm.tsx`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 401):**
```typescript
{(mode === "create" && !isClient) || isClient ? (
  <div className="flex items-start gap-12">
    {/* Type selection */}
    <div className="flex flex-col gap-2">
      ...
    </div>
    
    {/* Roles - on same line */}
    <div className="flex flex-col gap-2 relative group/roles-container">
      ...
    </div>
  </div>
) : null}
```

**–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:**
```typescript
{(mode === "create" && !isClient) || isClient || mode === "edit" ? (
  <div className="flex items-start gap-12">
    {/* Type selection */}
    <div className="flex flex-col gap-2">
      ...
    </div>
    
    {/* Roles - on same line */}
    <div className="flex flex-col gap-2 relative group/roles-container">
      ...
    </div>
  </div>
) : null}
```

**–ò–ª–∏ –±–æ–ª–µ–µ —è–≤–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```typescript
{(mode === "edit" || isClient || (mode === "create" && !isClient)) ? (
  <div className="flex items-start gap-12">
    {/* Type selection */}
    <div className="flex flex-col gap-2">
      ...
    </div>
    
    {/* Roles - on same line */}
    <div className="flex flex-col gap-2 relative group/roles-container">
      ...
    </div>
  </div>
) : null}
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ `mode === "edit"` –≤ —É—Å–ª–æ–≤–∏–µ
- –¢–µ–ø–µ—Ä—å —Å–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ–≥–¥–∞
- –í —Ä–µ–∂–∏–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

---

## üìä –í–õ–ò–Ø–ù–ò–ï

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –í —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–ø–∏—Å–µ–π Supplier/Subagent —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —Ä–æ–ª–∏ –¥–ª—è –∑–∞–ø–∏—Å–µ–π –±–µ–∑ —Ä–æ–ª–∏ Client
- ‚ùå UI –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–ª—è–º–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –í —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Ä–æ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ UI –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–ª—è–º–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–ï–ú–ö–ò

1. ‚úÖ –í —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ü–∏—è "Type and Roles" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
2. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ –¥–ª—è –∑–∞–ø–∏—Å–µ–π Supplier/Subagent
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Ä–æ–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. ‚úÖ –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
5. ‚úÖ –í—Å–µ —Ç—Ä–∏ —Ä–æ–ª–∏ (Client, Supplier, Subagent) –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –®–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. –û—Ç–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å —Å —Ä–æ–ª—å—é Supplier (–±–µ–∑ Client) ‚Üí —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞
2. –û—Ç–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å —Å —Ä–æ–ª—å—é Subagent (–±–µ–∑ Client) ‚Üí —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞
3. –û—Ç–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å —Å —Ä–æ–ª—å—é Client ‚Üí —Å–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞
4. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è
5. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å Supplier –∫ –∑–∞–ø–∏—Å–∏ Client ‚Üí –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
6. –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å Client, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Supplier ‚Üí –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –°–µ–∫—Ü–∏—è —Ä–æ–ª–µ–π –≤–∏–¥–Ω–∞ –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—Å–µ —Ä–æ–ª–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø–∏—Å–µ–π

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- **–í–∞–∂–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ª–æ–≥–∏–∫–∞ Type selection —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ —Ä–µ–∂–∏–º–µ edit
- **–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ä–æ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω–∞)
- **–í–∞–∂–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è API (PUT endpoint)
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

---

**Created by:** QA Agent  
**Date:** 2025-12-25  
**Related:** Directory Form, Roles Selection, Edit Mode

